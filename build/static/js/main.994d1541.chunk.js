(this["webpackJsonpmern-stack-client"]=this["webpackJsonpmern-stack-client"]||[]).push([[0],{174:function(e,t,a){e.exports=a.p+"static/media/falcon.a8687320.jpg"},206:function(e,t,a){e.exports=a(260)},260:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(19),c=a.n(o),l=a(20),i=a(85),s=a(192),u=a(29),m=a(9),d=Object(i.b)({posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{posts:[],post:"",isLoading:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"START_LOADING":return Object(m.a)(Object(m.a)({},e),{},{isLoading:!0});case"END_LOADING":return Object(m.a)(Object(m.a)({},e),{},{isLoading:!1});case"FETCH_ALL":return Object(m.a)(Object(m.a)({},e),{},{posts:t.payload.data,currentPage:t.payload.currentPage,numberOfPages:t.payload.numberOfPages});case"FETCH_BY_SEARCH":return Object(m.a)(Object(m.a)({},e),{},{posts:t.payload.data});case"FETCH_POST":return console.log(e.post),Object(m.a)(Object(m.a)({},e),{},{post:t.payload});case"LIKE":return Object(m.a)(Object(m.a)({},e),{},{posts:e.posts.map((function(e){return e._id===t.payload._id?t.payload:e}))});case"CREATE":return Object(m.a)(Object(m.a)({},e),{},{posts:[].concat(Object(u.a)(e.posts),[t.payload])});case"COMMENT":return console.log(t.payload),Object(m.a)(Object(m.a)({},e),{},{posts:e.posts.map((function(e){return e._id===t.payload._id?t.payload:e}))});case"UPDATE":return Object(m.a)(Object(m.a)({},e),{},{posts:e.posts.map((function(e){return e._id===t.payload._id?t.payload:e}))});case"DELETE":return Object(m.a)(Object(m.a)({},e),{},{posts:e.posts.filter((function(e){return e._id!==t.payload}))});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{authData:null,error:{exists:!1,messege:""}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH":return localStorage.setItem("profile",JSON.stringify(Object(m.a)({},null===t||void 0===t?void 0:t.data))),Object(m.a)(Object(m.a)({},e),{},{authData:null===t||void 0===t?void 0:t.data});case"LOGOUT":return localStorage.clear(),Object(m.a)(Object(m.a)({},e),{},{authData:null});case"error":return Object(m.a)(Object(m.a)({},e),{},{error:{exists:!0,messege:null===t||void 0===t?void 0:t.payload}});default:return e}}}),p=a(12),g=a(193),f=a(329),v=a(314),b=a(39),h=a(22),E=a(304),O=a(266),y=a(305),j=a(330),x=a(306),C=a(174),w=a.n(C),k=a(298),N=a(300),S=Object(k.a)((function(e){return{appBar:{borderRadius:15,margin:"30px 0",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:"10px 50px"},heading:{color:"rgba(0,183,255, 1)",textDecoration:"none"},image:{marginLeft:"15px"},toolbar:{display:"flex",justifyContent:"flex-end",width:"400px"},profile:{display:"flex",justifyContent:"space-between",width:"400px"},userName:{display:"flex",alignItems:"center"},brandContainer:{display:"flex",alignItems:"center"},purple:{color:e.palette.getContrastText(N.a[500]),backgroundColor:N.a[500]}}})),I=a(179),_=a(301),T=function(){var e,t,a,o,c=Object(l.b)(),i=S(),s=Object(h.g)(),u=Object(h.h)(),m=Object(n.useState)(JSON.parse(localStorage.getItem("profile"))),d=Object(p.a)(m,2),g=d[0],f=d[1],v=Object(_.a)(),C=Object(n.useCallback)((function(){c({type:"LOGOUT"}),s.push("/"),f(null)}),[c,s]);return Object(n.useEffect)((function(){var e=null===g||void 0===g?void 0:g.token;e&&(1e3*Object(I.a)(e).exp<(new Date).getTime()&&C());f(JSON.parse(localStorage.getItem("profile")))}),[u,C,null===g||void 0===g?void 0:g.token]),r.a.createElement(E.a,{className:i.appBar,position:"static",style:{backgroundColor:v.palette.appBar.main,color:v.palette.text.primary}},r.a.createElement("div",{className:i.brandContainer},r.a.createElement(O.a,{component:b.b,to:"/",className:i.heading,variant:"h3",align:"center"},"My App"),r.a.createElement("img",{className:i.image,src:w.a,alt:"icon",height:"60"})),r.a.createElement(y.a,{className:i.toolbar},g?r.a.createElement("div",{className:i.profile},r.a.createElement(j.a,{className:i.purple,alt:null===g||void 0===g||null===(e=g.result)||void 0===e?void 0:e.name,src:null===g||void 0===g||null===(t=g.result)||void 0===t?void 0:t.imageUrl}," ",null===g||void 0===g||null===(a=g.result)||void 0===a?void 0:a.name.charAt(0)),r.a.createElement(O.a,{className:i.username,variant:"h6"},null===g||void 0===g||null===(o=g.result)||void 0===o?void 0:o.name),r.a.createElement(x.a,{className:i.logout,variant:"contained",color:"secondary",onClick:C},"Logout")):"/auth"!==u.pathname?r.a.createElement(x.a,{component:b.b,to:"/auth",variant:"contained",color:"primary"},"Sign Up"):r.a.createElement(x.a,{component:b.b,to:"/",variant:"contained",color:"primary"},"See Posts")))},A=a(311),D=a(312),L=a(16),P=a.n(L),B=a(30),R=a(307),F=a(199),M=a(308),W=a(309),z=a(310),H=a(181),U=a.n(H),G=a(183),J=a.n(G),Y=a(182),K=a.n(Y),Q=a(95),q=a.n(Q),V=a(120),X=a.n(V),Z=a(180),$=a.n(Z).a.create({baseURL:"http://localhost:8000/api"});$.interceptors.request.use((function(e){return localStorage.getItem("profile")&&(e.headers.authorization="Bearer ".concat(JSON.parse(localStorage.getItem("profile")).token)),e}));var ee=function(e){return $.get("/posts?page=".concat(e))},te=function(e){return $.get("/posts/".concat(e))},ae=function(e){return $.get("/posts/search?searchQuery=".concat(e.search,"&tags=").concat(e.tags))},ne=function(e){return $.patch("/posts/".concat(e,"/likePost"))},re=function(e,t){return $.post("/posts/".concat(t,"/commentPost"),{value:e})},oe=function(e,t){return $.patch("/posts/".concat(e),t)},ce=function(e){return $.delete("/posts/".concat(e))},le=function(e){return $.post("/user/signin",e)},ie=function(e){return $.post("/user/signup",e)},se=function(e){return function(){var t=Object(B.a)(P.a.mark((function t(a,n){var r,o;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"START_LOADING"}),t.next=4,c=e,$.post("/posts",c);case 4:r=t.sent,o=r.data,a({type:"CREATE",payload:o}),n.push("/posts/".concat(o._id)),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}var c}),t,null,[[0,10]])})));return function(e,a){return t.apply(this,arguments)}}()},ue=function(e,t){return function(){var a=Object(B.a)(P.a.mark((function a(n){var r,o;return P.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,oe(e,t);case 3:r=a.sent,o=r.data,n({type:"UPDATE",payload:o}),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log(a.t0);case 11:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e){return a.apply(this,arguments)}}()},me=function(e){return function(){var t=Object(B.a)(P.a.mark((function t(a){var n,r;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ne(e);case 3:n=t.sent,r=n.data,a({type:"LIKE",payload:r}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},de=function(e,t){return function(){var a=Object(B.a)(P.a.mark((function a(n){var r,o;return P.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,re(e,t);case 3:return r=a.sent,o=r.data,console.log(o),n({type:"COMMENT",payload:o}),a.abrupt("return",o.comments);case 10:a.prev=10,a.t0=a.catch(0),console.log(a.t0);case 13:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e){return a.apply(this,arguments)}}()},pe=function(e){return function(){var t=Object(B.a)(P.a.mark((function t(a){var n,r;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"START_LOADING"}),t.next=4,ae(e);case 4:n=t.sent,r=n.data.data,a({type:"FETCH_BY_SEARCH",payload:{data:r}}),a({type:"END_LOADING"}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()},ge=Object(k.a)({media:{height:0,paddingTop:"56.25%",backgroundColor:"rgba(0, 0, 0, 0.5)",backgroundBlendMode:"darken"},border:{border:"solid"},fullHeightCard:{height:"100%"},card:{display:"flex",flexDirection:"column",justifyContent:"space-between",borderRadius:"15px",height:"100%",position:"relative"},overlay:{position:"absolute",top:"20px",left:"20px",color:"white"},overlay2:{position:"absolute",top:"20px",right:"20px",color:"white"},grid:{display:"flex"},details:{display:"flex",justifyContent:"space-between",margin:"20px"},title:{padding:"0 16px"},cardActions:{padding:"0 16px 8px 16px",display:"flex",justifyContent:"space-between"},cardAction:{display:"block",textAlign:"initial"}}),fe=function(e){var t,a,o,c,i,s,m=e.post,d=e.setCurrentId,g=Object(l.b)(),f=ge(),v=JSON.parse(localStorage.getItem("profile")),b=Object(h.g)(),E=Object(n.useState)(null===m||void 0===m?void 0:m.likes),y=Object(p.a)(E,2),j=y[0],C=y[1],w=j.find((function(e){var t,a;return e===((null===v||void 0===v||null===(t=v.result)||void 0===t?void 0:t.googleId)||(null===v||void 0===v||null===(a=v.result)||void 0===a?void 0:a._id))})),k=(null===v||void 0===v?void 0:v.result.googleId)||(null===v||void 0===v||null===(t=v.result)||void 0===t?void 0:t._id),N=function(){var e=Object(B.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g(me(m._id)),C(w?m.likes.filter((function(e){var t;return e!==((null===v||void 0===v?void 0:v.result.googleId)||(null===v||void 0===v||null===(t=v.result)||void 0===t?void 0:t._id))})):[].concat(Object(u.a)(m.likes),[k]));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){return j.length>0?j.find((function(e){var t,a;return e===((null===v||void 0===v||null===(t=v.result)||void 0===t?void 0:t.googleId)||(null===v||void 0===v||null===(a=v.result)||void 0===a?void 0:a._id))}))?r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,{fontSize:"small"}),"\xa0",j.length>2?"You and ".concat(j.length-1," others"):"".concat(j.length," like").concat(j.length>1?"s":"")):r.a.createElement(r.a.Fragment,null,r.a.createElement(q.a,{fontSize:"small"}),"\xa0",j.length," ",1===j.length?"Like":"Likes"):r.a.createElement(r.a.Fragment,null,r.a.createElement(q.a,{fontSize:"small"}),"\xa0Like")};return r.a.createElement(R.a,{className:f.card,raised:!0,elevation:6},r.a.createElement(F.a,{component:"span",name:"test",className:f.cardAction,onClick:function(e){b.push("/posts/".concat(m._id))}},r.a.createElement(M.a,{className:f.media,image:m.selectedFile||"https://user-images.githubusercontent.com/194400/49531010-48dad180-f8b1-11e8-8d89-1e61320e1d82.png",title:m.title}),r.a.createElement("div",{className:f.overlay},r.a.createElement(O.a,{variant:"h6"},m.name),r.a.createElement(O.a,{variant:"body2"},X()(m.createdAt).fromNow())),((null===v||void 0===v||null===(a=v.result)||void 0===a?void 0:a.googleId)===(null===m||void 0===m?void 0:m.creator)||(null===v||void 0===v||null===(o=v.result)||void 0===o?void 0:o._id)===(null===m||void 0===m?void 0:m.creator))&&r.a.createElement("div",{className:f.overlay2,name:"edit"},r.a.createElement(x.a,{onClick:function(e){e.stopPropagation(),d(m._id)},style:{color:"white"},size:"small"},r.a.createElement(K.a,{fontSize:"medium"}))),r.a.createElement("div",{className:f.details},r.a.createElement(O.a,{variant:"body2",color:"textSecondary",component:"h2"},m.tags.map((function(e){return"#".concat(e," ")})))),r.a.createElement(O.a,{className:f.title,gutterBottom:!0,variant:"h5",component:"h2"},m.title),r.a.createElement(W.a,null,r.a.createElement(O.a,{variant:"body2",color:"textSecondary",component:"p"},null===(c=m.message)||void 0===c?void 0:c.split(" ").splice(0,20).join(" "),"..."))),r.a.createElement(z.a,{className:f.cardActions},r.a.createElement(x.a,{size:"small",color:"primary",disabled:!(null===v||void 0===v?void 0:v.result),onClick:N},r.a.createElement(S,null)),((null===v||void 0===v||null===(i=v.result)||void 0===i?void 0:i.googleId)===(null===m||void 0===m?void 0:m.creator)||(null===v||void 0===v||null===(s=v.result)||void 0===s?void 0:s._id)===(null===m||void 0===m?void 0:m.creator))&&r.a.createElement(x.a,{size:"small",color:"secondary",onClick:function(){return g((e=m._id,function(){var t=Object(B.a)(P.a.mark((function t(a){return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ce(e);case 3:a({type:"DELETE",payload:e}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()));var e}},r.a.createElement(J.a,{fontSize:"small"})," \xa0 Delete")))},ve=Object(k.a)((function(e){return{mainContainer:{display:"flex",alignItems:"center"},smMargin:{margin:e.spacing(1)},actionDiv:{textAlign:"center"}}})),be=function(e){var t=e.setCurrentId,a=Object(l.c)((function(e){return e.posts})),n=a.posts,o=a.isLoading,c=ve();return(null===n||void 0===n?void 0:n.length)||o?o?r.a.createElement(A.a,null):r.a.createElement(D.a,{className:c.container,container:!0,alignItems:"stretch",spacing:3},null===n||void 0===n?void 0:n.map((function(e){return r.a.createElement(D.a,{key:e._id,item:!0,xs:12,sm:12,md:6,lg:3},r.a.createElement(fe,{post:e,setCurrentId:t}))}))):"You have no posts yet"},he=a(197),Ee=a(323),Oe=a(184),ye=a.n(Oe),je=Object(k.a)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(1)}},paper:{padding:e.spacing(2)},form:{display:"flex",flexWrap:"wrap",justifyContent:"center"},fileInput:{width:"97%",margin:"10px 0"},buttonSubmit:{marginBottom:10}}})),xe=function(e){var t=e.currentId,a=e.setCurrentId,o=e.userInfo,c=Object(n.useState)({name:"",title:"",message:"",tags:"",selectedFile:""}),i=Object(p.a)(c,2),s=i[0],u=i[1],d=Object(l.c)((function(e){return t?e.posts.posts.find((function(e){return e._id===t})):null})),g=Object(l.b)(),f=je(),v=o,b=Object(h.g)();Object(n.useEffect)((function(){d&&u(d)}),[d]);var E=function(){a(0),u({name:"",title:"",message:"",tags:"",selectedFile:""})},y=function(){var e=Object(B.a)(P.a.mark((function e(a){var n,r;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault(),0===t?(g(se(Object(m.a)(Object(m.a)({},s),{},{name:null===v||void 0===v||null===(n=v.result)||void 0===n?void 0:n.name})),b),E()):(g(ue(t,Object(m.a)(Object(m.a)({},s),{},{name:null===v||void 0===v||null===(r=v.result)||void 0===r?void 0:r.name}))),E());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(null===v||void 0===v?void 0:v.result)?r.a.createElement(he.a,{className:f.paper},r.a.createElement("form",{autoComplete:"off",noValidate:!0,className:"".concat(f.root," ").concat(f.form),onSubmit:y},r.a.createElement(O.a,{variant:"h6"},t?'Editing "'.concat(d.title,'"'):"Creating a Post"),r.a.createElement(Ee.a,{name:"title",variant:"outlined",label:"Title",fullWidth:!0,value:s.title,onChange:function(e){return u(Object(m.a)(Object(m.a)({},s),{},{title:e.target.value}))}}),r.a.createElement(Ee.a,{name:"message",variant:"outlined",label:"Message",fullWidth:!0,multiline:!0,minRows:4,value:s.message,onChange:function(e){return u(Object(m.a)(Object(m.a)({},s),{},{message:e.target.value}))}}),r.a.createElement(Ee.a,{name:"tags",variant:"outlined",label:"Tags (coma separated)",fullWidth:!0,value:s.tags,onChange:function(e){return u(Object(m.a)(Object(m.a)({},s),{},{tags:e.target.value.split(",")}))}}),r.a.createElement("div",{className:f.fileInput},r.a.createElement(ye.a,{type:"file",multiple:!1,onDone:function(e){var t=e.base64;return u(Object(m.a)(Object(m.a)({},s),{},{selectedFile:t}))}})),r.a.createElement(x.a,{className:f.buttonSubmit,variant:"contained",color:"primary",size:"large",type:"submit",fullWidth:!0},"Submit"),r.a.createElement(x.a,{variant:"contained",color:"secondary",size:"small",onClick:E,fullWidth:!0},"Clear"))):r.a.createElement(he.a,{className:f.paper},r.a.createElement(O.a,{variant:"h6",align:"center"},"Please sign up to create posts and beautiful stuff!"))},Ce=a(327),we=a(185),ke=a.n(we),Ne=a(333),Se=a(325),Ie=Object(k.a)((function(){return{ul:{justifyContent:"space-around"}}})),_e=function(e){var t=e.page,a=Object(l.c)((function(e){return e.posts})).numberOfPages,o=Ie(),c=Object(l.b)();return Object(n.useEffect)((function(){console.log(t),t&&c(function(e){return function(){var t=Object(B.a)(P.a.mark((function t(a){var n,r,o,c,l;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"START_LOADING"}),t.prev=1,t.next=4,ee(e);case 4:n=t.sent,r=n.data,o=r.data,c=r.currentPage,l=r.numberOfPages,console.log(o),a({type:"FETCH_ALL",payload:{data:o,currentPage:c,numberOfPages:l}}),a({type:"END_LOADING"}),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(1),console.log(t.t0);case 17:case"end":return t.stop()}}),t,null,[[1,14]])})));return function(e){return t.apply(this,arguments)}}()}(t))}),[t,c]),r.a.createElement(Ne.a,{classes:{ul:o.ul},count:a,page:Number(t)||1,variant:"outlined",color:"primary",renderItem:function(e){return r.a.createElement(Se.a,Object.assign({},e,{component:b.b,to:"/posts?page=".concat(e.page)}))}})},Te=a(15),Ae=Object(k.a)((function(e){return{appBarSearch:{borderRadius:4,marginBottom:"1rem",display:"flex",padding:"16px"},pagination:{borderRadius:4,marginTop:"1rem",padding:"16px"},gridContainer:Object(Te.a)({},e.breakpoints.down("xs"),{flexDirection:"column-reverse"})}})),De=r.a.memo((function(){var e=Object(n.useState)(0),t=Object(p.a)(e,2),a=t[0],o=t[1],c=Object(l.b)(),i=new URLSearchParams(Object(h.h)().search),s=Ae(),m=Object(h.g)(),d=i.get("page")||1,g=i.get("searchQuery"),f=Object(n.useState)("none"),b=Object(p.a)(f,2),O=b[0],y=b[1],j=Object(n.useState)([]),C=Object(p.a)(j,2),w=C[0],k=C[1],N=JSON.parse(localStorage.getItem("profile")),S=function(){O.trim()||w?(c(pe({search:O,tags:w.join(",")})),m.push("/posts/search?searchQuery=".concat(O||"none","&tags=").concat(w.join(",")))):m.push("/")};return r.a.createElement(Ce.a,{in:!0},r.a.createElement(v.a,{maxWidth:"xl"},r.a.createElement(D.a,{container:!0,justifyContent:"space-between",alignItems:"stretch",spacing:3,className:s.gridContainer},r.a.createElement(D.a,{item:!0,xs:12,sm:6,md:9},r.a.createElement(be,{setCurrentId:o})),r.a.createElement(D.a,{item:!0,xs:12,sm:6,md:3},r.a.createElement(E.a,{className:s.appBarSearch,position:"static",color:"inherit"},r.a.createElement(Ee.a,{name:"search",variant:"outlined",label:"Search Posts",fullWidth:!0,onKeyDown:function(e){13===e.keyCode&&S()},value:"none"===O?"":O,onChange:function(e){y(e.target.value)}}),r.a.createElement(ke.a,{style:{margin:"10px 0"},value:w,onAdd:function(e){return t=e,k([].concat(Object(u.a)(w),[t]));var t},onDelete:function(e){return t=e,k(w.filter((function(e){return e!==t})));var t},label:"Search Tags",variant:"outlined"}),r.a.createElement(x.a,{onClick:S,className:s.searchButton,variant:"contained",color:"primary"},"Search")),r.a.createElement(xe,{currentId:a,setCurrentId:o,userInfo:N}),!g&&!w.length&&r.a.createElement(he.a,{className:s.pagination,elevation:6},r.a.createElement(_e,{page:d}))))))})),Le=a(315),Pe=a(316),Be=a(186),Re=a.n(Be),Fe=a(187),Me=a.n(Fe),We=function(e){var t=e.name,a=e.handleChange,n=e.label,o=e.half,c=e.autoFocus,l=e.type,i=e.handleShowPassword;return r.a.createElement(D.a,{item:!0,xs:12,sm:o?6:12},r.a.createElement(Ee.a,{name:t,onChange:a,variant:"outlined",required:!0,fullWidth:!0,label:n,autoFocus:c,type:l,InputProps:"password"===t?{endAdornment:r.a.createElement(Le.a,{position:"end"},r.a.createElement(Pe.a,{onClick:i},"password"===l?r.a.createElement(Re.a,null):r.a.createElement(Me.a,null)))}:null}))},ze=function(){return r.a.createElement("div",null,r.a.createElement("div",{id:"g_id_onload","data-client_id":"627073650855-1845cbhj0t4f65opj6rbimjcjr8e0fg1.apps.googleusercontent.com","data-context":"signin","data-ux_mode":"popup","data-login_uri":"http://localhost:3000/auth","data-auto_prompt":"false"}),r.a.createElement("div",{className:"g_id_signin","data-type":"standard","data-shape":"rectangular","data-theme":"outline","data-text":"signin_with","data-size":"large","data-logo_alignment":"left"}))},He=function(e){var t=e.errorMessege,a=e.classes;return r.a.createElement("div",null,r.a.createElement(he.a,{className:a.paper},r.a.createElement(O.a,{variant:"h6",align:"center"},t)))},Ue=a(188),Ge=a.n(Ue),Je=Object(k.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",padding:e.spacing(2)},root:{"& .MuiTextField-root":{margin:e.spacing(1)}},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)},googleButton:{marginBottom:e.spacing(2)}}})),Ye={firstName:"",lastName:"",email:"",password:"",confirmPassword:""},Ke=function(){var e=Object(n.useState)(Ye),t=Object(p.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(!1),i=Object(p.a)(c,2),s=i[0],u=i[1],d=Object(l.b)(),g=Object(h.g)(),f=Object(l.c)((function(e){return e.auth.error})),b=Je(),E=Object(n.useState)(!1),y=Object(p.a)(E,2),C=y[0],w=y[1],k=function(e){return o(Object(m.a)(Object(m.a)({},a),{},Object(Te.a)({},e.target.name,e.target.value)))};return r.a.createElement(v.a,{component:"main",maxWidth:"xs"},r.a.createElement(he.a,{className:b.paper,elevation:3},r.a.createElement(j.a,{className:b.avatar},r.a.createElement(Ge.a,null)),r.a.createElement(O.a,{component:"h1",variant:"h5"},s?"Sign up":"Sign in"),r.a.createElement("form",{className:b.form,onSubmit:function(e){var t,n;e.preventDefault(),d(s?(t=a,n=g,function(){var e=Object(B.a)(P.a.mark((function e(a){var r,o;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("line 17: "+t),e.next=4,ie(t);case 4:r=e.sent,o=r.data,a({type:"AUTH",data:o}),n.push("/"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),a({type:"error",payload:e.t0.response.data.messege}),console.log(e.t0.response);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()):function(e,t){return function(){var a=Object(B.a)(P.a.mark((function a(n){var r,o;return P.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,le(e);case 3:r=a.sent,o=r.data,n({type:"AUTH",data:o}),t.push("/"),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0);case 12:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e){return a.apply(this,arguments)}}()}(a,g))}},r.a.createElement(D.a,{container:!0,spacing:2},s&&r.a.createElement(r.a.Fragment,null,r.a.createElement(We,{name:"firstName",label:"First Name",handleChange:k,autoFocus:!0,half:!0}),r.a.createElement(We,{name:"lastName",label:"Last Name",handleChange:k,half:!0})),r.a.createElement(We,{name:"email",label:"Email Address",handleChange:k,type:"email"}),r.a.createElement(We,{name:"password",label:"Password",handleChange:k,type:C?"text":"password",handleShowPassword:function(){return w(!C)}}),s&&r.a.createElement(We,{name:"confirmPassword",label:"Repeat Password",handleChange:k,type:"password"})),f.exists?r.a.createElement(He,{errorMessege:f.messege,classes:b}):"",r.a.createElement(x.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:b.submit},s?"Sign Up":"Sign In"),r.a.createElement(ze,null),r.a.createElement(D.a,{container:!0,justifyContent:"flex-end"},r.a.createElement(D.a,{item:!0},r.a.createElement(x.a,{onClick:function(){var e=document.getElementsByName("email")[0],t=document.getElementsByName("password")[0];o(Object(m.a)(Object(m.a)({},Ye),{},{email:e.value,password:t.value})),u((function(e){return!e})),w(!1)}},s?"Already have an account? Sign in":"Don't have an account? Sign Up"))))))},Qe=a(318),qe=a(328),Ve=Object(k.a)((function(e){return{media:{borderRadius:"20px",objectFit:"cover",width:"100%",maxHeight:"600px"},multilineColor:{color:e.palette.text.primary},card:Object(Te.a)({display:"flex",width:"100%"},e.breakpoints.down("sm"),{flexWrap:"wrap",flexDirection:"column"}),section:{borderRadius:"20px",margin:"10px",flex:1},imageSection:Object(Te.a)({marginLeft:"20px"},e.breakpoints.down("sm"),{marginLeft:0}),recommendedPosts:Object(Te.a)({display:"flex"},e.breakpoints.down("sm"),{flexDirection:"column"}),loadingPaper:{display:"flex",justifyContent:"center",alignItems:"center",padding:"20px",borderRadius:"15px",height:"39vh"},commentsOuterContainer:{display:"flex",justifyContent:"space-between"},commentsInnerContainer:{height:"200px",overflowY:"auto",marginRight:"30px"}}})),Xe=a(331),Ze=function(e){var t=e.post,a=JSON.parse(localStorage.getItem("profile")),o=Object(n.useState)(""),c=Object(p.a)(o,2),i=c[0],s=c[1],u=Object(l.b)(),m=Object(n.useState)(null===t||void 0===t?void 0:t.comments),d=Object(p.a)(m,2),g=d[0],f=d[1],v=Ve(),b=Object(n.useRef)(),h=Object(_.a)(),E=function(){var e=Object(B.a)(P.a.mark((function e(){var n,r;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(de("".concat(null===a||void 0===a||null===(n=a.result)||void 0===n?void 0:n.name,": ").concat(i),null===t||void 0===t?void 0:t._id));case 2:r=e.sent,s(""),f(r),b.current.scrollIntoView({behavior:"smooth"});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(Xe.a,{sx:{color:h.palette.text.primary}},r.a.createElement("div",{className:v.commentsOuterContainer},r.a.createElement("div",{className:v.commentsInnerContainer},r.a.createElement(O.a,{gutterBottom:!0,variant:"h6"},"Comments"),null===g||void 0===g?void 0:g.map((function(e,t){return r.a.createElement(O.a,{key:t,gutterBottom:!0,variant:"subtitle1"},r.a.createElement("strong",null,e.split(": ")[0]),e.split(":")[1])})),r.a.createElement("div",{ref:b})),r.a.createElement("div",{style:{width:"70%"}},r.a.createElement(O.a,{gutterBottom:!0,variant:"h6"},"Write a comment"),r.a.createElement(Ee.a,{InputProps:{input:{color:"red"}},fullWidth:!0,minRows:4,variant:"outlined",label:"Comment",multiline:!0,value:i,onChange:function(e){return s(e.target.value)}}),r.a.createElement("br",null),r.a.createElement(x.a,{style:{marginTop:"10px",color:h.palette.primary.main,backgroundColor:h.palette.buttons.main},fullWidth:!0,disabled:!i.length,color:"primary",variant:"contained",onClick:E},"Comment")))))},$e=function(){var e=Object(l.b)(),t=Object(h.g)(),a=Object(_.a)();console.log(a);var o=Ve(),c=Object(l.c)((function(e){return e.posts})),i=c.post,s=c.posts,u=c.isLoading,m=Object(h.i)().id;if(Object(n.useEffect)((function(){e(function(e){return function(){var t=Object(B.a)(P.a.mark((function t(a){var n,r;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"START_LOADING"}),t.next=4,te(e);case 4:n=t.sent,r=n.data,a({type:"FETCH_POST",payload:r}),a({type:"END_LOADING"}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}(m))}),[m]),Object(n.useEffect)((function(){i&&e(pe({search:"none",tags:null===i||void 0===i?void 0:i.tags.join(",")}))}),[i]),!i)return null;if(u)return r.a.createElement(he.a,{elevation:6,className:o.loadingPaper},r.a.createElement(A.a,{size:"7em"}));var d=s.filter((function(e){var t=e._id;return i._id!==t}));return r.a.createElement(he.a,{style:{padding:"20px",borderRadius:"15px",backgroundColor:a.palette.background.default},elevation:6},r.a.createElement("div",{className:o.card},r.a.createElement("div",{className:o.section},r.a.createElement(qe.a,{sx:{color:a.palette.text.primary}},r.a.createElement(O.a,{variant:"h3",component:"h2"},i.title),r.a.createElement(O.a,{gutterBottom:!0,variant:"h6",color:"primary",component:"h2"},i.tags.map((function(e){return"#".concat(e," ")}))),r.a.createElement(O.a,{gutterBottom:!0,variant:"body1",component:"p"},i.message),r.a.createElement(O.a,{variant:"h6"},"Created by: ",i.name),r.a.createElement(O.a,{variant:"body1"},X()(i.createdAt).fromNow()),r.a.createElement(Qe.a,{style:{margin:"20px 0"}}),r.a.createElement(O.a,{variant:"body1"},i.messege),r.a.createElement(Qe.a,{style:{margin:"20px 0"}}),r.a.createElement(O.a,{variant:"body1"},r.a.createElement("strong",null,"Realtime Chat - coming soon!")),r.a.createElement(Qe.a,{style:{margin:"20px 0"}}),r.a.createElement(Ze,{post:i}),r.a.createElement(Qe.a,{style:{margin:"20px 0"}}))),r.a.createElement("div",{className:o.imageSection},r.a.createElement("img",{className:o.media,src:i.selectedFile||"https://user-images.githubusercontent.com/194400/49531010-48dad180-f8b1-11e8-8d89-1e61320e1d82.png",alt:i.title}))),d&&r.a.createElement("div",{className:o.section},r.a.createElement(qe.a,{sx:{color:a.palette.text.primary}},r.a.createElement(O.a,{gutterBottom:!0,variant:"h5"}," You might also like: "),r.a.createElement(Qe.a,null),r.a.createElement("div",{className:o.recommendedPosts},d.map((function(e){return r.a.createElement("div",{style:{margin:"20px",cursor:"pointer"},onClick:function(){var a;a=e._id,t.push("/posts/".concat(a))},key:e._id},r.a.createElement(O.a,{gutterBottom:!0,variant:"h6"},e.title),r.a.createElement(O.a,{gutterBottom:!0,variant:"body1"},e.name),r.a.createElement(O.a,{gutterBottom:!0,variant:"body1"},e.message),r.a.createElement(O.a,{gutterBottom:!0,variant:"h6"},r.a.createElement(q.a,{fontSize:"small"})," ",e.likes.length),r.a.createElement("img",{src:e.selectedFile,width:"100px"}))}))))))},et=a(324),tt=a(191),at=a.n(tt),nt=a(190),rt=a.n(nt),ot=r.a.createContext({toggleColorMode:function(){}}),ct=function(){var e=Object(_.a)(),t=r.a.useContext(ot);return r.a.createElement(b.a,null,r.a.createElement(v.a,{maxWidth:"lg",style:{backgroundColor:e.palette.background.default,color:e.palette.text.primary}},r.a.createElement(T,null),r.a.createElement("div",null,e.palette.mode," mode",r.a.createElement(et.a,{sx:{ml:1},onClick:t.toggleColorMode},"dark"===e.palette.mode?r.a.createElement(rt.a,null):r.a.createElement(at.a,null))),r.a.createElement(h.d,null,r.a.createElement(h.b,{render:function(){return r.a.createElement(h.a,{to:"/posts"})},exact:!0,path:"/"}),r.a.createElement(h.b,{render:function(){return r.a.createElement(De,{theme:e})},exact:!0,path:"/posts"}),r.a.createElement(h.b,{path:"/posts/search",render:function(){return r.a.createElement(De,null)},exact:!0}),r.a.createElement(h.b,{path:"/posts/:id",render:function(){return r.a.createElement($e,null)},exact:!0}),r.a.createElement(h.b,{render:function(){return r.a.createElement(Ke,null)},exact:!0,path:"/auth"}))))},lt=a(321),it=a(123),st=a(124),ut=a(322),mt=a(73),dt=function(){var e=r.a.useState("light"),t=Object(p.a)(e,2),a=t[0],n=t[1],o=r.a.useMemo((function(){return{toggleColorMode:function(){n((function(e){return"light"===e?"dark":"light"}))}}}),[]),c=r.a.useMemo((function(){return Object(g.a)({palette:Object(m.a)({mode:a},"light"===a?{primary:{main:mt.a[900]},divider:lt.a[200],text:{primary:it.a[900],secondary:it.a[800]},background:{default:"#fff",paper:"#fff"},buttons:{main:st.a[200]},appBar:{main:"#fff"}}:{primary:{main:ut.a[500]},divider:ut.a[700],text:{primary:"#fff",secondary:it.a[500]},background:{default:"#121212",paper:"#121212"},buttons:{main:mt.a[200]},appBar:{main:it.a[500]}})})}),[a]);return r.a.createElement(ot.Provider,{value:o},r.a.createElement(f.a,{theme:c},r.a.createElement(ct,null)))},pt=Object(i.d)(d,Object(i.c)(Object(i.a)(s.a)));c.a.render(r.a.createElement(l.a,{store:pt},r.a.createElement(dt,null)),document.getElementById("root"))}},[[206,1,2]]]);
//# sourceMappingURL=main.994d1541.chunk.js.map