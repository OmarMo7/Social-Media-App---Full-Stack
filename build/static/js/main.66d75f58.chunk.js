(this["webpackJsonpmern-stack-client"]=this["webpackJsonpmern-stack-client"]||[]).push([[0],{124:function(e,t,a){e.exports=a.p+"static/media/falcon.a8687320.jpg"},148:function(e,t,a){e.exports=a(201)},201:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(12),c=a.n(o),l=a(13),i=a(63),s=a(139),u=a(61),m=a(6),d=Object(i.b)({posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{posts:[],post:"",isLoading:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"START_LOADING":return Object(m.a)(Object(m.a)({},e),{},{isLoading:!0});case"END_LOADING":return Object(m.a)(Object(m.a)({},e),{},{isLoading:!1});case"FETCH_ALL":return Object(m.a)(Object(m.a)({},e),{},{posts:t.payload.data,currentPage:t.payload.currentPage,numberOfPages:t.payload.numberOfPages});case"FETCH_BY_SEARCH":return Object(m.a)(Object(m.a)({},e),{},{posts:t.payload.data});case"FETCH_POST":return console.log(e.post),Object(m.a)(Object(m.a)({},e),{},{post:t.payload});case"LIKE":return Object(m.a)(Object(m.a)({},e),{},{posts:e.posts.map((function(e){return e._id===t.payload._id?t.payload:e}))});case"CREATE":return Object(m.a)(Object(m.a)({},e),{},{posts:[].concat(Object(u.a)(e.posts),[t.payload])});case"COMMENT":return console.log(t.payload),Object(m.a)(Object(m.a)({},e),{},{posts:e.posts.map((function(e){return e._id===t.payload._id?t.payload:e}))});case"UPDATE":return Object(m.a)(Object(m.a)({},e),{},{posts:e.posts.map((function(e){return e._id===t.payload._id?t.payload:e}))});case"DELETE":return Object(m.a)(Object(m.a)({},e),{},{posts:e.posts.filter((function(e){return e._id!==t.payload}))});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{authData:null,error:{exists:!1,messege:""}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH":return localStorage.setItem("profile",JSON.stringify(Object(m.a)({},null===t||void 0===t?void 0:t.data))),Object(m.a)(Object(m.a)({},e),{},{authData:null===t||void 0===t?void 0:t.data});case"LOGOUT":return localStorage.clear(),Object(m.a)(Object(m.a)({},e),{},{authData:null});case"error":return Object(m.a)(Object(m.a)({},e),{},{error:{exists:!0,messege:null===t||void 0===t?void 0:t.payload}});default:return e}}}),p=a(236),g=a(25),f=a(16),v=a(22),b=a(227),h=a(206),E=a(228),O=a(243),j=a(229),y=a(124),x=a.n(y),w=a(224),C=a(226),N=Object(w.a)((function(e){return{appBar:{borderRadius:15,margin:"30px 0",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:"10px 50px"},heading:{color:"rgba(0,183,255, 1)",textDecoration:"none"},image:{marginLeft:"15px"},toolbar:{display:"flex",justifyContent:"flex-end",width:"400px"},profile:{display:"flex",justifyContent:"space-between",width:"400px"},userName:{display:"flex",alignItems:"center"},brandContainer:{display:"flex",alignItems:"center"},purple:{color:e.palette.getContrastText(C.a[500]),backgroundColor:C.a[500]}}})),S=a(129),k=function(){var e,t,a,o,c=Object(l.b)(),i=N(),s=Object(f.g)(),u=Object(f.h)(),m=Object(n.useState)(JSON.parse(localStorage.getItem("profile"))),d=Object(v.a)(m,2),p=d[0],y=d[1],w=Object(n.useCallback)((function(){c({type:"LOGOUT"}),s.push("/"),y(null)}),[c,s]);return Object(n.useEffect)((function(){var e=null===p||void 0===p?void 0:p.token;e&&(1e3*Object(S.a)(e).exp<(new Date).getTime()&&w());y(JSON.parse(localStorage.getItem("profile")))}),[u,w,null===p||void 0===p?void 0:p.token]),r.a.createElement(b.a,{className:i.appBar,position:"static",color:"inherit"},r.a.createElement("div",{className:i.brandContainer},r.a.createElement(h.a,{component:g.b,to:"/",className:i.heading,variant:"h3",align:"center"},"My App"),r.a.createElement("img",{className:i.image,src:x.a,alt:"icon",height:"60"})),r.a.createElement(E.a,{className:i.toolbar},p?r.a.createElement("div",{className:i.profile},r.a.createElement(O.a,{className:i.purple,alt:null===p||void 0===p||null===(e=p.result)||void 0===e?void 0:e.name,src:null===p||void 0===p||null===(t=p.result)||void 0===t?void 0:t.imageUrl}," ",null===p||void 0===p||null===(a=p.result)||void 0===a?void 0:a.name.charAt(0)),r.a.createElement(h.a,{className:i.username,variant:"h6"},null===p||void 0===p||null===(o=p.result)||void 0===o?void 0:o.name),r.a.createElement(j.a,{className:i.logout,variant:"contained",color:"secondary",onClick:w},"Logout")):"/auth"!==u.pathname?r.a.createElement(j.a,{component:g.b,to:"/auth",variant:"contained",color:"primary"},"Sign Up"):r.a.createElement(j.a,{component:g.b,to:"/",variant:"contained",color:"primary"},"See Posts")))},I=a(234),_=a(235),T=a(10),A=a.n(T),D=a(21),L=a(230),P=a(143),B=a(231),R=a(232),F=a(233),W=a(131),z=a.n(W),H=a(133),U=a.n(H),M=a(132),G=a.n(M),J=a(68),Y=a.n(J),K=a(83),Q=a.n(K),q=a(130),V=a.n(q).a.create({baseURL:"http://localhost:8000"});V.interceptors.request.use((function(e){return localStorage.getItem("profile")&&(e.headers.authorization="Bearer ".concat(JSON.parse(localStorage.getItem("profile")).token)),e}));var X=function(e){return V.get("/posts?page=".concat(e))},Z=function(e){return V.get("/posts/".concat(e))},$=function(e){return V.get("/posts/search?searchQuery=".concat(e.search,"&tags=").concat(e.tags))},ee=function(e){return V.patch("/posts/".concat(e,"/likePost"))},te=function(e,t){return V.post("/posts/".concat(t,"/commentPost"),{value:e})},ae=function(e,t){return V.patch("/posts/".concat(e),t)},ne=function(e){return V.delete("/posts/".concat(e))},re=function(e){return V.post("/user/signin",e)},oe=function(e){return V.post("/user/signup",e)},ce=function(e){return function(){var t=Object(D.a)(A.a.mark((function t(a,n){var r,o;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"START_LOADING"}),t.next=4,c=e,V.post("/posts",c);case 4:r=t.sent,o=r.data,a({type:"CREATE",payload:o}),n.push("/posts/".concat(o._id)),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}var c}),t,null,[[0,10]])})));return function(e,a){return t.apply(this,arguments)}}()},le=function(e,t){return function(){var a=Object(D.a)(A.a.mark((function a(n){var r,o;return A.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,ae(e,t);case 3:r=a.sent,o=r.data,n({type:"UPDATE",payload:o}),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log(a.t0);case 11:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e){return a.apply(this,arguments)}}()},ie=function(e){return function(){var t=Object(D.a)(A.a.mark((function t(a){var n,r;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ee(e);case 3:n=t.sent,r=n.data,a({type:"LIKE",payload:r}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},se=function(e,t){return function(){var a=Object(D.a)(A.a.mark((function a(n){var r,o;return A.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,te(e,t);case 3:return r=a.sent,o=r.data,console.log(o),n({type:"COMMENT",payload:o}),a.abrupt("return",o.comments);case 10:a.prev=10,a.t0=a.catch(0),console.log(a.t0);case 13:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e){return a.apply(this,arguments)}}()},ue=function(e){return function(){var t=Object(D.a)(A.a.mark((function t(a){var n,r;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"START_LOADING"}),t.next=4,$(e);case 4:n=t.sent,r=n.data.data,a({type:"FETCH_BY_SEARCH",payload:{data:r}}),a({type:"END_LOADING"}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()},me=Object(w.a)({media:{height:0,paddingTop:"56.25%",backgroundColor:"rgba(0, 0, 0, 0.5)",backgroundBlendMode:"darken"},border:{border:"solid"},fullHeightCard:{height:"100%"},card:{display:"flex",flexDirection:"column",justifyContent:"space-between",borderRadius:"15px",height:"100%",position:"relative"},overlay:{position:"absolute",top:"20px",left:"20px",color:"white"},overlay2:{position:"absolute",top:"20px",right:"20px",color:"white"},grid:{display:"flex"},details:{display:"flex",justifyContent:"space-between",margin:"20px"},title:{padding:"0 16px"},cardActions:{padding:"0 16px 8px 16px",display:"flex",justifyContent:"space-between"},cardAction:{display:"block",textAlign:"initial"}}),de=function(e){var t,a,o,c,i,s,m=e.post,d=e.setCurrentId,p=Object(l.b)(),g=me(),b=JSON.parse(localStorage.getItem("profile")),E=Object(f.g)(),O=Object(n.useState)(null===m||void 0===m?void 0:m.likes),y=Object(v.a)(O,2),x=y[0],w=y[1],C=x.find((function(e){var t,a;return e===((null===b||void 0===b||null===(t=b.result)||void 0===t?void 0:t.googleId)||(null===b||void 0===b||null===(a=b.result)||void 0===a?void 0:a._id))})),N=(null===b||void 0===b?void 0:b.result.googleId)||(null===b||void 0===b||null===(t=b.result)||void 0===t?void 0:t._id),S=function(){var e=Object(D.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p(ie(m._id)),w(C?m.likes.filter((function(e){var t;return e!==((null===b||void 0===b?void 0:b.result.googleId)||(null===b||void 0===b||null===(t=b.result)||void 0===t?void 0:t._id))})):[].concat(Object(u.a)(m.likes),[N]));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){return x.length>0?x.find((function(e){var t,a;return e===((null===b||void 0===b||null===(t=b.result)||void 0===t?void 0:t.googleId)||(null===b||void 0===b||null===(a=b.result)||void 0===a?void 0:a._id))}))?r.a.createElement(r.a.Fragment,null,r.a.createElement(z.a,{fontSize:"small"}),"\xa0",x.length>2?"You and ".concat(x.length-1," others"):"".concat(x.length," like").concat(x.length>1?"s":"")):r.a.createElement(r.a.Fragment,null,r.a.createElement(Y.a,{fontSize:"small"}),"\xa0",x.length," ",1===x.length?"Like":"Likes"):r.a.createElement(r.a.Fragment,null,r.a.createElement(Y.a,{fontSize:"small"}),"\xa0Like")};return r.a.createElement(L.a,{className:g.card,raised:!0,elevation:6},r.a.createElement(P.a,{component:"span",name:"test",className:g.cardAction,onClick:function(e){E.push("/posts/".concat(m._id))}},r.a.createElement(B.a,{className:g.media,image:m.selectedFile||"https://user-images.githubusercontent.com/194400/49531010-48dad180-f8b1-11e8-8d89-1e61320e1d82.png",title:m.title}),r.a.createElement("div",{className:g.overlay},r.a.createElement(h.a,{variant:"h6"},m.name),r.a.createElement(h.a,{variant:"body2"},Q()(m.createdAt).fromNow())),((null===b||void 0===b||null===(a=b.result)||void 0===a?void 0:a.googleId)===(null===m||void 0===m?void 0:m.creator)||(null===b||void 0===b||null===(o=b.result)||void 0===o?void 0:o._id)===(null===m||void 0===m?void 0:m.creator))&&r.a.createElement("div",{className:g.overlay2,name:"edit"},r.a.createElement(j.a,{onClick:function(e){e.stopPropagation(),d(m._id)},style:{color:"white"},size:"small"},r.a.createElement(G.a,{fontSize:"medium"}))),r.a.createElement("div",{className:g.details},r.a.createElement(h.a,{variant:"body2",color:"textSecondary",component:"h2"},m.tags.map((function(e){return"#".concat(e," ")})))),r.a.createElement(h.a,{className:g.title,gutterBottom:!0,variant:"h5",component:"h2"},m.title),r.a.createElement(R.a,null,r.a.createElement(h.a,{variant:"body2",color:"textSecondary",component:"p"},null===(c=m.message)||void 0===c?void 0:c.split(" ").splice(0,20).join(" "),"..."))),r.a.createElement(F.a,{className:g.cardActions},r.a.createElement(j.a,{size:"small",color:"primary",disabled:!(null===b||void 0===b?void 0:b.result),onClick:S},r.a.createElement(k,null)),((null===b||void 0===b||null===(i=b.result)||void 0===i?void 0:i.googleId)===(null===m||void 0===m?void 0:m.creator)||(null===b||void 0===b||null===(s=b.result)||void 0===s?void 0:s._id)===(null===m||void 0===m?void 0:m.creator))&&r.a.createElement(j.a,{size:"small",color:"secondary",onClick:function(){return p((e=m._id,function(){var t=Object(D.a)(A.a.mark((function t(a){return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ne(e);case 3:a({type:"DELETE",payload:e}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()));var e}},r.a.createElement(U.a,{fontSize:"small"})," \xa0 Delete")))},pe=Object(w.a)((function(e){return{mainContainer:{display:"flex",alignItems:"center"},smMargin:{margin:e.spacing(1)},actionDiv:{textAlign:"center"}}})),ge=function(e){var t=e.setCurrentId,a=Object(l.c)((function(e){return e.posts})),n=a.posts,o=a.isLoading,c=pe();return(null===n||void 0===n?void 0:n.length)||o?o?r.a.createElement(I.a,null):r.a.createElement(_.a,{className:c.container,container:!0,alignItems:"stretch",spacing:3},null===n||void 0===n?void 0:n.map((function(e){return r.a.createElement(_.a,{key:e._id,item:!0,xs:12,sm:12,md:6,lg:3},r.a.createElement(de,{post:e,setCurrentId:t}))}))):"You have no posts yet"},fe=a(141),ve=a(240),be=a(134),he=a.n(be),Ee=Object(w.a)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(1)}},paper:{padding:e.spacing(2)},form:{display:"flex",flexWrap:"wrap",justifyContent:"center"},fileInput:{width:"97%",margin:"10px 0"},buttonSubmit:{marginBottom:10}}})),Oe=function(e){var t=e.currentId,a=e.setCurrentId,o=e.userInfo,c=Object(n.useState)({name:"",title:"",message:"",tags:"",selectedFile:""}),i=Object(v.a)(c,2),s=i[0],u=i[1],d=Object(l.c)((function(e){return t?e.posts.posts.find((function(e){return e._id===t})):null})),p=Object(l.b)(),g=Ee(),b=o,E=Object(f.g)();Object(n.useEffect)((function(){d&&u(d)}),[d]);var O=function(){a(0),u({name:"",title:"",message:"",tags:"",selectedFile:""})},y=function(){var e=Object(D.a)(A.a.mark((function e(a){var n,r;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault(),0===t?(p(ce(Object(m.a)(Object(m.a)({},s),{},{name:null===b||void 0===b||null===(n=b.result)||void 0===n?void 0:n.name})),E),O()):(p(le(t,Object(m.a)(Object(m.a)({},s),{},{name:null===b||void 0===b||null===(r=b.result)||void 0===r?void 0:r.name}))),O());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(null===b||void 0===b?void 0:b.result)?r.a.createElement(fe.a,{className:g.paper},r.a.createElement("form",{autoComplete:"off",noValidate:!0,className:"".concat(g.root," ").concat(g.form),onSubmit:y},r.a.createElement(h.a,{variant:"h6"},t?'Editing "'.concat(d.title,'"'):"Creating a Post"),r.a.createElement(ve.a,{name:"title",variant:"outlined",label:"Title",fullWidth:!0,value:s.title,onChange:function(e){return u(Object(m.a)(Object(m.a)({},s),{},{title:e.target.value}))}}),r.a.createElement(ve.a,{name:"message",variant:"outlined",label:"Message",fullWidth:!0,multiline:!0,minRows:4,value:s.message,onChange:function(e){return u(Object(m.a)(Object(m.a)({},s),{},{message:e.target.value}))}}),r.a.createElement(ve.a,{name:"tags",variant:"outlined",label:"Tags (coma separated)",fullWidth:!0,value:s.tags,onChange:function(e){return u(Object(m.a)(Object(m.a)({},s),{},{tags:e.target.value.split(",")}))}}),r.a.createElement("div",{className:g.fileInput},r.a.createElement(he.a,{type:"file",multiple:!1,onDone:function(e){var t=e.base64;return u(Object(m.a)(Object(m.a)({},s),{},{selectedFile:t}))}})),r.a.createElement(j.a,{className:g.buttonSubmit,variant:"contained",color:"primary",size:"large",type:"submit",fullWidth:!0},"Submit"),r.a.createElement(j.a,{variant:"contained",color:"secondary",size:"small",onClick:O,fullWidth:!0},"Clear"))):r.a.createElement(fe.a,{className:g.paper},r.a.createElement(h.a,{variant:"h6",align:"center"},"Please sign up to create posts and beautiful stuff!"))},je=a(242),ye=a(135),xe=a.n(ye),we=a(244),Ce=a(241),Ne=Object(w.a)((function(){return{ul:{justifyContent:"space-around"}}})),Se=function(e){var t=e.page,a=Object(l.c)((function(e){return e.posts})).numberOfPages,o=Ne(),c=Object(l.b)();return Object(n.useEffect)((function(){console.log(t),t&&c(function(e){return function(){var t=Object(D.a)(A.a.mark((function t(a){var n,r,o,c,l;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"START_LOADING"}),t.prev=1,t.next=4,X(e);case 4:n=t.sent,r=n.data,o=r.data,c=r.currentPage,l=r.numberOfPages,a({type:"FETCH_ALL",payload:{data:o,currentPage:c,numberOfPages:l}}),a({type:"END_LOADING"}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e){return t.apply(this,arguments)}}()}(t))}),[t]),r.a.createElement(we.a,{classes:{ul:o.ul},count:a,page:Number(t)||1,variant:"outlined",color:"primary",renderItem:function(e){return r.a.createElement(Ce.a,Object.assign({},e,{component:g.b,to:"/posts?page=".concat(e.page)}))}})},ke=a(32),Ie=Object(w.a)((function(e){return{appBarSearch:{borderRadius:4,marginBottom:"1rem",display:"flex",padding:"16px"},pagination:{borderRadius:4,marginTop:"1rem",padding:"16px"},gridContainer:Object(ke.a)({},e.breakpoints.down("xs"),{flexDirection:"column-reverse"})}})),_e=function(){var e=Object(n.useState)(0),t=Object(v.a)(e,2),a=t[0],o=t[1],c=Object(l.b)(),i=new URLSearchParams(Object(f.h)().search),s=Ie(),m=Object(f.g)(),d=i.get("page")||1,g=i.get("searchQuery"),h=Object(n.useState)("none"),E=Object(v.a)(h,2),O=E[0],y=E[1],x=Object(n.useState)([]),w=Object(v.a)(x,2),C=w[0],N=w[1],S=JSON.parse(localStorage.getItem("profile")),k=function(){O.trim()||C?(c(ue({search:O,tags:C.join(",")})),m.push("/posts/search?searchQuery=".concat(O||"none","&tags=").concat(C.join(",")))):m.push("/")};return r.a.createElement(je.a,{in:!0},r.a.createElement(p.a,{maxWidth:"xl"},r.a.createElement(_.a,{container:!0,justifyContent:"space-between",alignItems:"stretch",spacing:3,className:s.gridContainer},r.a.createElement(_.a,{item:!0,xs:12,sm:6,md:9},r.a.createElement(ge,{setCurrentId:o})),r.a.createElement(_.a,{item:!0,xs:12,sm:6,md:3},r.a.createElement(b.a,{className:s.appBarSearch,position:"static",color:"inherit"},r.a.createElement(ve.a,{name:"search",variant:"outlined",label:"Search Posts",fullWidth:!0,onKeyDown:function(e){13===e.keyCode&&k()},value:"none"===O?"":O,onChange:function(e){y(e.target.value)}}),r.a.createElement(xe.a,{style:{margin:"10px 0"},value:C,onAdd:function(e){return t=e,N([].concat(Object(u.a)(C),[t]));var t},onDelete:function(e){return t=e,N(C.filter((function(e){return e!==t})));var t},label:"Search Tags",variant:"outlined"}),r.a.createElement(j.a,{onClick:k,className:s.searchButton,variant:"contained",color:"primary"},"Search")),r.a.createElement(Oe,{currentId:a,setCurrentId:o,userInfo:S}),!g&&!C.length&&r.a.createElement(fe.a,{className:s.pagination,elevation:6},r.a.createElement(Se,{page:d}))))))},Te=a(237),Ae=a(238),De=a(136),Le=a.n(De),Pe=a(137),Be=a.n(Pe),Re=function(e){var t=e.name,a=e.handleChange,n=e.label,o=e.half,c=e.autoFocus,l=e.type,i=e.handleShowPassword;return r.a.createElement(_.a,{item:!0,xs:12,sm:o?6:12},r.a.createElement(ve.a,{name:t,onChange:a,variant:"outlined",required:!0,fullWidth:!0,label:n,autoFocus:c,type:l,InputProps:"password"===t?{endAdornment:r.a.createElement(Te.a,{position:"end"},r.a.createElement(Ae.a,{onClick:i},"password"===l?r.a.createElement(Le.a,null):r.a.createElement(Be.a,null)))}:null}))},Fe=function(){return r.a.createElement("div",null,r.a.createElement("div",{id:"g_id_onload","data-client_id":"627073650855-1845cbhj0t4f65opj6rbimjcjr8e0fg1.apps.googleusercontent.com","data-context":"signin","data-ux_mode":"popup","data-login_uri":"http://localhost:3000/auth","data-auto_prompt":"false"}),r.a.createElement("div",{className:"g_id_signin","data-type":"standard","data-shape":"rectangular","data-theme":"outline","data-text":"signin_with","data-size":"large","data-logo_alignment":"left"}))},We=function(e){var t=e.errorMessege,a=e.classes;return r.a.createElement("div",null,r.a.createElement(fe.a,{className:a.paper},r.a.createElement(h.a,{variant:"h6",align:"center"},t)))},ze=a(138),He=a.n(ze),Ue=Object(w.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",padding:e.spacing(2)},root:{"& .MuiTextField-root":{margin:e.spacing(1)}},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)},googleButton:{marginBottom:e.spacing(2)}}})),Me={firstName:"",lastName:"",email:"",password:"",confirmPassword:""},Ge=function(){var e=Object(n.useState)(Me),t=Object(v.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(!1),i=Object(v.a)(c,2),s=i[0],u=i[1],d=Object(l.b)(),g=Object(f.g)(),b=Object(l.c)((function(e){return e.auth.error})),E=Ue(),y=Object(n.useState)(!1),x=Object(v.a)(y,2),w=x[0],C=x[1],N=function(e){return o(Object(m.a)(Object(m.a)({},a),{},Object(ke.a)({},e.target.name,e.target.value)))};return r.a.createElement(p.a,{component:"main",maxWidth:"xs"},r.a.createElement(fe.a,{className:E.paper,elevation:3},r.a.createElement(O.a,{className:E.avatar},r.a.createElement(He.a,null)),r.a.createElement(h.a,{component:"h1",variant:"h5"},s?"Sign up":"Sign in"),r.a.createElement("form",{className:E.form,onSubmit:function(e){var t,n;e.preventDefault(),d(s?(t=a,n=g,function(){var e=Object(D.a)(A.a.mark((function e(a){var r,o;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("line 17: "+t),e.next=4,oe(t);case 4:r=e.sent,o=r.data,a({type:"AUTH",data:o}),n.push("/"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),a({type:"error",payload:e.t0.response.data.messege}),console.log(e.t0.response);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()):function(e,t){return function(){var a=Object(D.a)(A.a.mark((function a(n){var r,o;return A.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,re(e);case 3:r=a.sent,o=r.data,n({type:"AUTH",data:o}),t.push("/"),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0);case 12:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e){return a.apply(this,arguments)}}()}(a,g))}},r.a.createElement(_.a,{container:!0,spacing:2},s&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Re,{name:"firstName",label:"First Name",handleChange:N,autoFocus:!0,half:!0}),r.a.createElement(Re,{name:"lastName",label:"Last Name",handleChange:N,half:!0})),r.a.createElement(Re,{name:"email",label:"Email Address",handleChange:N,type:"email"}),r.a.createElement(Re,{name:"password",label:"Password",handleChange:N,type:w?"text":"password",handleShowPassword:function(){return C(!w)}}),s&&r.a.createElement(Re,{name:"confirmPassword",label:"Repeat Password",handleChange:N,type:"password"})),b.exists?r.a.createElement(We,{errorMessege:b.messege,classes:E}):"",r.a.createElement(j.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:E.submit},s?"Sign Up":"Sign In"),r.a.createElement(Fe,null),r.a.createElement(_.a,{container:!0,justifyContent:"flex-end"},r.a.createElement(_.a,{item:!0},r.a.createElement(j.a,{onClick:function(){var e=document.getElementsByName("email")[0],t=document.getElementsByName("password")[0];o(Object(m.a)(Object(m.a)({},Me),{},{email:e.value,password:t.value})),u((function(e){return!e})),C(!1)}},s?"Already have an account? Sign in":"Don't have an account? Sign Up"))))))},Je=a(239),Ye=Object(w.a)((function(e){return{media:Object(ke.a)({borderRadius:"20px",objectFit:"cover",width:"100%",maxHeight:"600px"},"width","400px"),card:Object(ke.a)({display:"flex",width:"100%"},e.breakpoints.down("sm"),{flexWrap:"wrap",flexDirection:"column"}),section:{borderRadius:"20px",margin:"10px",flex:1},imageSection:Object(ke.a)({marginLeft:"20px"},e.breakpoints.down("sm"),{marginLeft:0}),recommendedPosts:Object(ke.a)({display:"flex"},e.breakpoints.down("sm"),{flexDirection:"column"}),loadingPaper:{display:"flex",justifyContent:"center",alignItems:"center",padding:"20px",borderRadius:"15px",height:"39vh"},commentsOuterContainer:{display:"flex",justifyContent:"space-between"},commentsInnerContainer:{height:"200px",overflowY:"auto",marginRight:"30px"}}})),Ke=function(e){var t=e.post,a=JSON.parse(localStorage.getItem("profile")),o=Object(n.useState)(""),c=Object(v.a)(o,2),i=c[0],s=c[1],u=Object(l.b)(),m=Object(n.useState)(null===t||void 0===t?void 0:t.comments),d=Object(v.a)(m,2),p=d[0],g=d[1],f=Ye(),b=Object(n.useRef)(),E=function(){var e=Object(D.a)(A.a.mark((function e(){var n,r;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(se("".concat(null===a||void 0===a||null===(n=a.result)||void 0===n?void 0:n.name,": ").concat(i),null===t||void 0===t?void 0:t._id));case 2:r=e.sent,s(""),g(r),b.current.scrollIntoView({behavior:"smooth"});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("div",{className:f.commentsOuterContainer},r.a.createElement("div",{className:f.commentsInnerContainer},r.a.createElement(h.a,{gutterBottom:!0,variant:"h6"},"Comments"),null===p||void 0===p?void 0:p.map((function(e,t){return r.a.createElement(h.a,{key:t,gutterBottom:!0,variant:"subtitle1"},r.a.createElement("strong",null,e.split(": ")[0]),e.split(":")[1])})),r.a.createElement("div",{ref:b})),r.a.createElement("div",{style:{width:"70%"}},r.a.createElement(h.a,{gutterBottom:!0,variant:"h6"},"Write a comment"),r.a.createElement(ve.a,{fullWidth:!0,minRows:4,variant:"outlined",label:"Comment",multiline:!0,value:i,onChange:function(e){return s(e.target.value)}}),r.a.createElement("br",null),r.a.createElement(j.a,{style:{marginTop:"10px"},fullWidth:!0,disabled:!i.length,color:"primary",variant:"contained",onClick:E},"Comment"))))},Qe=function(){var e=Object(l.b)(),t=Object(f.g)(),a=Ye(),o=Object(l.c)((function(e){return e.posts})),c=o.post,i=o.posts,s=o.isLoading,u=Object(f.i)().id;if(Object(n.useEffect)((function(){e(function(e){return function(){var t=Object(D.a)(A.a.mark((function t(a){var n,r;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"START_LOADING"}),t.next=4,Z(e);case 4:n=t.sent,r=n.data,a({type:"FETCH_POST",payload:r}),a({type:"END_LOADING"}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}(u))}),[u]),Object(n.useEffect)((function(){c&&e(ue({search:"none",tags:null===c||void 0===c?void 0:c.tags.join(",")}))}),[c]),!c)return null;if(console.log(s),s)return r.a.createElement(fe.a,{elevation:6,className:a.loadingPaper},r.a.createElement(I.a,{size:"7em"}));var m=i.filter((function(e){var t=e._id;return c._id!==t}));return r.a.createElement(fe.a,{style:{padding:"20px",borderRadius:"15px"},elevation:6},r.a.createElement("div",{className:a.card},r.a.createElement("div",{className:a.section},r.a.createElement(h.a,{variant:"h3",component:"h2"},c.title),r.a.createElement(h.a,{gutterBottom:!0,variant:"h6",color:"textSecondary",component:"h2"},c.tags.map((function(e){return"#".concat(e," ")}))),r.a.createElement(h.a,{gutterBottom:!0,variant:"body1",component:"p"},c.message),r.a.createElement(h.a,{variant:"h6"},"Created by: ",c.name),r.a.createElement(h.a,{variant:"body1"},Q()(c.createdAt).fromNow()),r.a.createElement(Je.a,{style:{margin:"20px 0"}}),r.a.createElement(h.a,{variant:"body1"},c.messege),r.a.createElement(Je.a,{style:{margin:"20px 0"}}),r.a.createElement(h.a,{variant:"body1"},r.a.createElement("strong",null,"Realtime Chat - coming soon!")),r.a.createElement(Je.a,{style:{margin:"20px 0"}}),r.a.createElement(Ke,{post:c}),r.a.createElement(Je.a,{style:{margin:"20px 0"}})),r.a.createElement("div",{className:a.imageSection},r.a.createElement("img",{className:a.media,src:c.selectedFile||"https://user-images.githubusercontent.com/194400/49531010-48dad180-f8b1-11e8-8d89-1e61320e1d82.png",alt:c.title}))),m&&r.a.createElement("div",{className:a.section},r.a.createElement(h.a,{gutterBottom:!0,variant:"h5"}," You might also like: "),r.a.createElement(Je.a,null),r.a.createElement("div",{className:a.recommendedPosts},m.map((function(e){return r.a.createElement("div",{style:{margin:"20px",cursor:"pointer"},onClick:function(){var a;a=e._id,t.push("/posts/".concat(a))},key:e._id},r.a.createElement(h.a,{gutterBottom:!0,variant:"h6"},e.title),r.a.createElement(h.a,{gutterBottom:!0,variant:"body1"},e.name),r.a.createElement(h.a,{gutterBottom:!0,variant:"body1"},e.message),r.a.createElement(h.a,{gutterBottom:!0,variant:"h6"},r.a.createElement(Y.a,{fontSize:"small"})," ",e.likes.length),r.a.createElement("img",{src:e.selectedFile,width:"100px"}))})))))},qe=function(){return r.a.createElement(g.a,null,r.a.createElement(p.a,{maxWidth:"lg"},r.a.createElement(k,null),r.a.createElement(f.d,null,r.a.createElement(f.b,{component:function(){return r.a.createElement(f.a,{to:"/posts"})},exact:!0,path:"/"}),r.a.createElement(f.b,{component:_e,exact:!0,path:"/posts"}),r.a.createElement(f.b,{path:"/posts/search",component:_e,exact:!0}),r.a.createElement(f.b,{path:"/posts/:id",component:Qe,exact:!0}),r.a.createElement(f.b,{component:function(){return r.a.createElement(Ge,null)},exact:!0,path:"/auth"}))))},Ve=Object(i.d)(d,Object(i.c)(Object(i.a)(s.a)));c.a.render(r.a.createElement(l.a,{store:Ve},r.a.createElement(qe,null)),document.getElementById("root"))}},[[148,1,2]]]);
//# sourceMappingURL=main.66d75f58.chunk.js.map